
# 图片插入要求

---

## 1. 下载压纹文件

* 打开<http:images.checkpointcn.com>
* 下载tgz压缩文件并解压


## 2. 获取图片元数据

* 说明, 元数据在图片ffd9后,长度152字节
* 格式如下:
```cpp
 /**
  * 作用:bob添加的报警图片信息
  */
 struct pictureInfo
 {
     char fileName[26];                  /*图片文件名 ASCII码 格式:I-收银台号-yyyyMMddhhmmss.jpg*/
     char alertTime[15];                 /*图片的报警时间 ASCII码 格式:yyyyMMddhhmmss*/
     char lane;                          /*收银台号*/
     char cashier[21];                   /*收银员编号*/
     char uiType;                        /*已经无用*/
     char isAi;                          /*在AI处理时,标识AI处理的结果*/
     char reserve[34];                   /*保留*/
     char store[20];                     /*收银台号相应的MAC地址*/
     char barcode[30];                   /*条形码,已经无用*/
     char confirmed;                     /*显示的图片是否经过收银员确认, 确认为1*/
 } __attribute__((packed, aligned(1)));

```

## 3. 获取目前mysql数据

* mysql信息
  * host: 103.44.243.111
  * port: 13306
  * user: readonly
    * pwd: ReadOnly)!@9

* 查询对应z_images_店的图片信息
  * 当adjustment不为空时,说明已经经过人工调整过,即服务端和前端识别的结果不一样
  * 保存图片和数据库识别的结果

## 4. 更新数据到新的mysql中

* mysql信息
  * host: gz-cynosdbmysql-grp-go36exdn.sql.tencentcdb.com
  * port: 25043
  * user: wws
  * pwd: Wuwansi202#